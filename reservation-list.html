<!-- reservation-list.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì˜ˆì•½ ëª©ë¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-4xl mx-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold mb-4">ì „ì²´ ì˜ˆì•½ ëª©ë¡</h1>
    <div id="reservation-list" class="space-y-4"></div>
  </div>

  <script type="module">
    import { db } from "./scripts/firebase-config.js";
    import { ref, get } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

    const listContainer = document.getElementById("reservation-list");

    async function loadReservations() {
      try {
        const snapshot = await get(ref(db, "reservations"));
        const data = snapshot.val();

        if (!data) {
          listContainer.innerHTML = "<p>ì˜ˆì•½ëœ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
          return;
        }

        for (const lotName in data) {
          const reservations = data[lotName];
          const card = document.createElement("div");
          card.className = "border p-4 rounded bg-gray-50";

          const header = `<h2 class="font-semibold mb-2">ğŸ…¿ï¸ ${lotName}</h2>`;
          const entries = Object.values(reservations)
            .map(r => `<p>ğŸ‘¤ ${r.name} | ğŸ“… ${r.date} | ğŸ•’ ${r.time}</p>`)
            .join("");

          card.innerHTML = header + entries;
          listContainer.appendChild(card);
        }
      } catch (err) {
        console.error("ì˜ˆì•½ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:", err);
        listContainer.innerHTML = "<p class='text-red-500'>âŒ ì˜ˆì•½ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
      }
    }

    loadReservations();
  </script>
</body>
</html>
